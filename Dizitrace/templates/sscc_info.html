{% extends 'mainbase.html' %}
{%block content%}
<!DOCTYPE html>
{%load static%}



      <script src="https://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
      <!-- Content Wrapper. Contains page content -->
      <!-- Developed by Ravi Chand Matangi v 0.1.0 July 11, 2021-->
      <script src="https://bossanova.uk/jsuites/v3/jsuites.js"></script>
      <link rel="stylesheet" href="https://bossanova.uk/jsuites/v3/jsuites.css" type="text/css" />
      <style>
        .nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover {
        color: #555;
        cursor: default;
        background-color: #d2d6de;
        border: 1px solid #ddd;
        border-bottom-color: transparent;
        }


      </style>
      <style>
        html {font-family: helvetica, arial;}
        .htimeline { list-style: none; padding: 0; margin: 20px 0 0; }
        /*		.htimeline .step { float: left; border-top-style: solid; border-top-width: 5px; position: relative; margin-bottom: 15px; text-align: left; padding: 3px 0 5px 10px; background-color: #ddd; color: #333; height: 160px; vertical-align: middle; border-right: solid 1px #bbb; transition: all 0.5s ease;} */
        .htimeline .step:nth-child(odd) { background-color: #ccc; }
        .htimeline .step:first-child { border-left: solid 1px #ccc; }
        .htimeline .step:hover { background-color: #ccc; border-bottom-width: 6px; }
        .htimeline .step > div { margin: 0 5px; font-size: 14px; vertical-align: top; padding: 0;}
        .htimeline .step.green { border-top-color: #348F50;}
        .htimeline .step.orange { border-top-color: #F09819;}
        .htimeline .step.red { border-top-color: #C04848;}
        .htimeline .step.blue { border-top-color: #49a09d;}
        .htimeline .step.darkblue { border-top-color: #337ab7;}
        /* .htimeline .step::before { width: 15px; height: 1d5px; border-radius: 150px; content: ' '; background-color: white; position: absolute; top: -10px; left: 0px; border-style: solid; border-width: 3px; transition: all 0.5s ease;} */
        /*.htimeline .step:hover::before { width: 20px; height: 20px; bottom: -12px; } */
        .htimeline .step.green::before {border-color: #348F50;}
        .htimeline .step.orange::before {border-color: #F09819;}
        .htimeline .step.red::before {border-color: #C04848;}
        .htimeline .step.blue::before {border-color: #49a09d;}
        .htimeline .step.darkblue { border-top-color: #337ab7;}
        .htimeline .step::after { content: attr(data-date); position: absolute; top: -20px; left: 17px; font-size: 11px; font-style: italic; color: #888}
        /*TASKS*/
        .htimeline .step .tasks { margin-top: 12px; }
        .htimeline .step .tasks .resource {position: relative; height: 60px;}
        .htimeline .step .tasks .resource::before { position: absolute; bottom: 2px; left: -5px; content: attr(data-name); font-size: 10px; font-style: italic; color: #888}
        .htimeline .step .tasks .task { overflow: hidden; font-size: 10px; padding: 3px; border: solid 1px white; border-radius: 4px; min-height: 20px;}
        .htimeline .step.green .tasks .task { background-color: #348F50; color: white; }
        .htimeline .step.orange .tasks .task { background-color: #F09819; color: white; }
        .htimeline .step.red .tasks .task { background-color: #C04848; color: white; }
        .htimeline .step.blue .tasks .task { background-color: #49a09d; color: white; }
        .htimeline .step.darkblue .tasks .task { background-color: #337ab7; color: white; }
        #div1 {
        display: inline-block;
        }
        #div2 {
        display: inline-block;
        }
      </style>
      <script type="text/javascript">
          function ValidateTextBox() {
              if (document.getElementById("txtName").value.trim() == "") {
                  alert("Please enter Name!");
                  return false;
              }
          };


      </script>
      {%for i in res_token%}

      {%if i.organization_id == '1' %}
            {%if i.role == '7' %}

      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <h1>
            Track & Trace <small>Click <b style="color:red">Track</b> current status or  <b style=" color:green">Trace</b> to know end to end journey of your product/Logistic Asset</small>
          </h1>
          <ol class="breadcrumb">
            <li><a href="{% url 'dashboard1'%}"><i class="fa fa-dashboard"></i> Home</a></li>
            <!-- <li class="active"><a href="{% url 'tracktrace'%}">Search Product</a></li> -->
            <li><a href="{% url 'tracktrace'%}">Search Product</a></li>
            <li class="active"><a href="{% url 'tracktrace'%}">Product Info</a></li>
          </ol>

        </section>

        <section class="content">
          <form >
            <!-- Small boxes (Stat box) -->
            <div class="row">
              <div class="col-md-12 bg-light text-right"></div>
              <!-- Start-First Box Selection options  -->
              <div id="sel1"  class="col-lg-4" style="background-color: #fff; border:0.5px solid grey; padding-right: 5px;padding-left: 5px;">
                <div class="card" style="height: 555px;">
                  <div class="card card-default card-tabs">
                    <!-- <h5 class="card-title"><span class="label label-default	">Your Selected SSCC No Details</span></h5>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -->

                    <h5>SSCC Data Code <small>(GS1-128)</small></h5>
<p><img  src='https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=http://www.tracepharm.io:5000/api/v1.0.0/exp/package_details/{{result.sscc_no}}'><small style='line-height:20px;padding-top:-60px;float:right;padding-right:130px;'>&nbsp;&nbsp;&nbsp;&nbsp;(01){{result.gtin}}<br>(00){{result.sscc_no}}</small></p>
<span style='float:right; padding-bottom: 5px;margin-top:-130px;' ><a class='btn btn-danger' href='/tracknew/{{ssccno}}'> <i class='fa fa-map-marker' aria-hidden='true'></i>&nbsp; Track&nbsp;</a>&nbsp; &nbsp; &nbsp;</span>
<p style='float:right; padding-bottom: 0px;margin-top:-20px;'>  <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#myModal" style="background:#00002e;">Show Video</button>

  <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#myModal1" style="background:#00002e;">Show File</button>
</p>

                                               <!-- <div align = 'left'><img  src='https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=http://www.tracepharm.io:5000/api/v1.0.0/exp/package_details/{{result.sscc_no}}'>
                                                 <div align = 'left'; >
                                                <small style='line-height:10px;'>&nbsp;&nbsp;&nbsp;&nbsp;(01){{result.gtin}}<br>&nbsp;&nbsp;&nbsp;&nbsp;(00){{result.sscc_no}}</small></div>
                                              </div>
                                               </div> -->

                    <section>


                    <ul class='htimeline'>
                      <li class='step col-sm-12'>
                        <div class='tasks container-fluid'>
                          <div class='resource' data-name=''>
                            <div class='task col-sm-5' style="font-size:90%">SSCC No</div>
                            <div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.sscc_no}}</div>
                            <div class='task col-sm-5' style="font-size:90%">Purchase Order No</div>
                            <div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.purchase_order}}</div>
				              <div class='task col-sm-5' style="font-size:90%">Sender</div>
              <div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.entry_point_owner.owner}}</div>
              <div class='task col-sm-5' style="font-size:90%">Receiver</div>
              <div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.exit_point_ower.comapny_name}}</div>
                <div class='task col-sm-5' style="font-size:90%">Package Type</div>
                            <div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.package_type}}</div>
                            <div class='task col-sm-5' style="font-size:90%">Package Pallet S.No</div>
                            <div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.package_sn}}</div>
				<div class='task col-sm-5' style="font-size:90%">Inner Qty</div>
                            <div class='task col-sm-7' style="font-size:90%">&nbsp;30</div>
							<div class='task col-sm-5' style="font-size:90%">Package Shape</div>
                            <div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.shape}}</div>
								<div class='task col-sm-5' style="font-size:90%">Package Weight</div>
                            <div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.package_gross_weight}}</div>
                            <div class='task col-sm-5' style="font-size:90%">Package dimensions</div>
							<div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.total_dimensions}}</div>

              <div class='task col-sm-5' style="font-size:90%">Package Color</div>
							<div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.colour}}</div>
              <div class='task col-sm-5' style="font-size:90%">Package Status</div>
							<div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.status}}</div>
              <div class='task col-sm-5' style="font-size:90%">Temparature</div>
							<div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.controll_condition.temperature}}</div>
              <div class='task col-sm-5' style="font-size:90%">Humidity</div>
							<div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.controll_condition.humidity}}</div>
              <div class='task col-sm-5' style="font-size:90%">Transaction Status</div>
							<div class='task col-sm-7' style="font-size:90%">&nbsp;{{result.transaction_status.transaction_status}}</div>




                          </div>
                        </div>
                      <br/></li>
                    </ul>
                  </section><br><br>
                    <!-- <div style="padding-top:100px;padding-left:200px;">

                                  </div> -->
                  </div>

                </div>

              </div>
              <!-- End - First Box Selection options  -->



              <!-- Start-Second Box Selection options  -->
              <div id="sel2"  class="col-lg-8" style="background-color: #fff; border:0.5px solid grey; padding-right: 5px;padding-left: 5px;">
                <div class="card" style="height: 555px;">
                  <div class="card card-primary card-tabs">
                    <h5 class="card-title"><span class="label label-primary">Select Case# / Item#... of your selected product!</span></h5>

                    <!--
                    <div class="form-group">
                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <button id="btn1" title="Click here to Track" name="tnttype" value="100" class="btn btn-danger btn-md float-right"  type="submit" style="margin-top : 8px; line-height: 1.3; font-size: 14px; "  ><i class="fa fa-map-marker" aria-hidden="true"></i>&nbsp; Track&nbsp;</button>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;
                    </div> -->
                    <div class="card-header p-0" style="padding-right: 0px;padding-left: 0px;line-height: 1.5;" >
								<ul class="nav nav-tabs" id="custom-tabs-one-tab"  role="tablist">
									<li class="nav-item" >
										<a class="nav-link active" id="custom-tabs-one-home-tab" data-toggle="pill" href="#custom-tabs-one-home" role="tab" aria-controls="custom-tabs-one-home" style=" font-size: 12px;  line-height: 0.5; margin-top : 8px; " aria-selected="true">Case #</a>
									</li>

									<li class="nav-item">
										<a class="nav-link" id="custom-tabs-one-messages-tab" data-toggle="pill" href="#custom-tabs-one-messages" role="tab" aria-controls="custom-tabs-one-messages" style=" font-size: 12px;  line-height: 0.5; margin-top : 8px; " aria-selected="false">Item #</a>
									</li>

									<!-- <li class="nav-item">
										<a class="nav-link" id="custom-tabs-one-settings-tab" data-toggle="pill" href="#custom-tabs-one-settings" role="tab" aria-controls="custom-tabs-one-settings" style=" font-size: 12px;  line-height: 0.5; margin-top : 8px; " aria-selected="false">Case/Item#</a>
									</li> -->
									<!-- <li class="nav-item">
										<a class="nav-link" id="custom-tabs-one-profile-tab" data-toggle="pill" href="#custom-tabs-one-profile" role="tab" aria-controls="custom-tabs-one-profile" style=" font-size: 12px;  line-height: 0.5; margin-top : 8px; " aria-selected="false">SSCC#</a>
									</li> -->
									<!--
									<li class="nav-item">
										<div class="form-group">
											&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <button id="btn1" title="Click here to Track" name="tnttype" value="100" class="btn btn-danger btn-md float-right"  type="submit" style="margin-top : 8px; line-height: 1.3; font-size: 14px; "  ><i class="fa fa-map-marker" aria-hidden="true"></i>&nbsp; Track&nbsp;</button>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;
										</div>
									</li>
									<li class="nav-item">
										<div class="form-group">
											<button id="btn2" title="Click here to Track" name="tnttype" value="200"  class="btn btn-success btn-md float-right" type="submit"  style="margin-top : 8px; line-height: 1.3; font-size: 14px; "><i class="fa fa-share-alt-square" aria-hidden="true"></i>&nbsp; Trace&nbsp;</button>&nbsp;
										</div>
									</li> -->
								</ul>
						<br>
								<!-- /.card body Starts-->
								<div class="card-body">
									<div class="tab-content" id="custom-tabs-one-tabContent">
										<div class="tab-pane fade" id="custom-tabs-one-home" role="tabpanel" aria-labelledby="custom-tabs-one-home-tab">
											<div class="card-body">
												<!--  <h6 class="card-title" style="font-size:1rem;"><b><button class="btn btn-sm btn-default" type="button">Select Lot/Batch#</button></b></h6> -->
												<div class="search-container">
													<div class="form-group" style="display: flex;">
														<select id="mylotid" name="nmylotid" class="itemName form-control" id="txtName" style="width:300px"  required>
															<option value="">--- Select Lot Number ---</option>

															{% for i in caselist %}
															<option value={{i}}>{{i}}</option>
															{% endfor %}

                                                        </select>&nbsp;&nbsp;
														<button class="btn btn-sm btn-primary"  type="button"  onclick="lotvalues()" id="btnCheck" value="Check Empty" onclick="return ValidateTextBox()">Use Case#</button>
															&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<p><b>Active Case Count: {{casecount.case_count}}</b></p>
													</div>
													</div>

													<!-- <div id="#"  class="col-lg-12" style="height: 310px; background-color: #fff; border:0.5px solid grey; padding-right: 5px;padding-left: 5px;"> -->
													<div id="idshowlot" class="card" style="height: 310px;margin-top: 1%;" >
														<!-- <div class='container-fluid'> </div> -->

													</div>

														<!-- </div> -->
													</div>
										</div>
										<div class="tab-pane fade" id="custom-tabs-one-profile" role="tabpanel" aria-labelledby="custom-tabs-one-profile-tab">
													<div class="card-body">
														<!-- <h6 class="card-title" style="font-size:1rem;"><b><button class="btn btn-sm btn-default" type="button">Select SSCC#</button></b></h6> -->
														<div class="search-container">
															<div class="form-group" style="display: flex;">
																<select id="myssccid" name="nmyssccid" class="itemName form-control" style="width:300px" required>
																	<!-- <option value=<?=form_dropdown('ssccnumber', $tnt_ssccdata, set_value( 'ssccnumber',$ssccnumber), array('class' => 'form-control'),"id='idsscc' ");?></option> -->
																	<option value="">--- Select SSCC Number ---</option>
                                  <!-- {% for i in ssccresult %}
    															<option value={{i}}>{{i}}</option>
    															{% endfor %} -->
                                                                </select>&nbsp;&nbsp;
																	<button class="btn btn-sm btn-primary" type="button" onclick="ssccvalues()">Use SSCC#</button>

																</div>
															</div><br><br>
															<div id="idshowsscc" class="card" style="height: 310px;margin-top: 3.4%;" >
														<!-- <div class='container-fluid'> </div> -->
														<br>
                            <br>
                            <br>
														</div>
														<!-- </div> -->
													</div>
										</div>
										<div class="tab-pane fade" id="custom-tabs-one-messages" role="tabpanel" aria-labelledby="custom-tabs-one-messages-tab">
														<div class="card-body">
															<!-- 														<h6 class="card-title" style="font-size:1rem;"><b><button class="btn btn-sm btn-default" type="button">Select Pallet#</button></b></h6> -->
															<div class="search-container">
																<div class="form-group" style="display: flex;">
																	<select id="mypalletid" name="nmypalletid" class="itemName form-control" style="width:300px" required>

																		<option value="">--- Select Item Number ---</option>
<!--																		<option value={{a.product_disp.product.serial_number}}>{{a.product_disp.product.serial_number}}</option>-->
																		<!-- <option value=<?=form_dropdown('palletsn', $tnt_palletdata, set_value('palletsn',$palletsn), array('class' => 'form-control'),"id='idpallet' ");?></option> -->
																		</select>&nbsp;&nbsp;
																		<button class="btn btn-sm btn-primary" type="button" onclick="serialvalues()">Use Item#</button>
                                    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<p class="showitemcount">Active item Count:</p>
																	</div>
																</div>
																<div id="idshowpallet" class="card" style="height: 310px;margin-top: 1.4%;" >
														<!-- <div class='container-fluid'> </div> -->
														<br>

														</div>
														<!-- </div> -->
													</div>
										</div>
										<div class="tab-pane fade" id="custom-tabs-one-settings" role="tabpanel" aria-labelledby="custom-tabs-one-settings-tab">
															<div class="card-body">
																<!--dropdown input-->
																<!--															<h6 class="card-title" style="font-size:1rem;"><b><button class="btn btn-sm btn-default" type="button">Select Case#</button></b></h6> -->
																<div class="search-container">
																	<div class="form-group" style="display: flex;">
																	<select id="mycaseid" name="nmycaseid" class="itemName form-control" style="width:300px" required>
																		<option value="">--- Select Case Number</option>
																		<option value={{a.product_disp.sscc_no}}>{{a.product_disp.sscc_no}}</option>
																		<!-- <option value=<?=form_dropdown('casesn', $tnt_casedata, set_value( 'casesn',$casesn), array('class' => 'form-control'),''); ?></option> -->
																		</select>&nbsp;&nbsp;
																		<button class="btn btn-sm btn-primary" type="button" onclick="showDiv('idshowcase')">Use Case/Item#</button>
																	</div>
																	</div>
																	<div id="idshowcase" class="card" style="height: 310px; display:none" >
														<!-- <div class='container-fluid'> </div> -->
														<br>
                            <br>
														<ul class='htimeline' >
															<li class='step col-sm-7'>
																<div class='tasks container-fluid'>
																	<div class='resource' data-name=''>
																		<div class='task col-sm-4'>Lot Number</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idlot_number"></span></div>
																		<div class='task col-sm-4'>Lot Quantity</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idlot_quantity"></span></div>
																		<div class='task col-sm-4'>Base Pack Type</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idbase_pack_type"></span></div>
																		<div class='task col-sm-4'>Product Code Type</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idproduct_code_type"></span></div>
																		<div class='task col-sm-4'>Origination Date</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idorigination_date"></span></div>
																		<div class='task col-sm-4'>Expiration Date</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idexpiration_date"></span></div>
																		<div class='task col-sm-4'>Best Before Date</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idbest_before_date"></span></div>
																		<div class='task col-sm-4'>Sell By Date</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idsell_by_date"></span></div>
																		<div class='task col-sm-4'>Retest by date</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idretest_by_date"></span></div>
																		<div class='task col-sm-4'>Packaged by date</div>
																		<div class='task col-sm-8'> &nbsp; <span id="idorigination_date2"></span></div>
																		<div class='task col-sm-4'>Packaged/Quality Check Status</div>
																		<div class='task col-sm-8'> &nbsp; Samples Tested, Packaged into Pallets/Cases/Items </div>
																	</div>
																</li>
																<h5 align = "centre"; ><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lot/Batch Data Code <small>(GS1-128)</small></b></h5>
																<li class='col-sm-5'>
																	<div align = "left"; class='task col-sm-4'> <span id="idbarcode"></span></div>
																	<div align = "left"; class='task col-sm-8'> <span id="idbarcodemsg"></span></div>

																</li>
															</ul>

														</div>
														<!-- </div> -->
													</div>
										</div>
									</div>
								</div>

					</div>
													<!-- /.card body ends-->
				</div>
				</div>
			</div>

			</div>
									<!-- End - Second Box Selection options  -->

									<!-- Small boxes (Ends box) -->
								</form>
							</section>
						</div>

            <!-- Modal -->
                          <div class="modal fade" id="myModal" role="dialog">
                            <div class="modal-dialog">

                              <!-- Modal content-->
                              <div class="modal-content">
                                <div class="modal-header">
                                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                                  <h4 class="modal-title">Video Evidence</h4>
                                </div>
                                <div class="modal-body">
                                 <video width="540" height="250" controls ><source src="{{result.video}}" type="video/mp4"><b>{{result.video}}</b></video>
                                </div>
                                <div class="modal-footer">
                                  <a href="{{result.video}}" target="_blank" download><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
            </svg>
                                  </a>
                                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                              </div>

                            </div>
                          </div>

            <!-- Modal -->
            <div class="modal fade" id="myModal1" role="dialog">
            <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
            <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Evidence File</h4>
            </div>
            <div class="modal-body">
            <iframe id="invisible" src="{{ result.file }}" style="width:570px; height:240px;" frameborder="0" download></iframe>
            </div>
            <div class="modal-footer">
            <a href="{{result.file}}" target="_blank" download><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
            </svg>
            </a>   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
            </div>

            </div>
            </div>



						<script type='text/javascript'>
							function getLotId(vlotid) {
								//alert(vdivid);
								var BASE_URL = "";
								var tempArray = "";
								//alert(tempArray[vlotid].lot_number);
								// 10 Batch Number(1-20) //23x Lot Number
								document.getElementById('idlot_number').innerHTML = tempArray[vlotid].lot_number;
								document.getElementById('idlot_quantity').innerHTML = tempArray[vlotid].lot_quantity;
								document.getElementById('idbase_pack_type').innerHTML = tempArray[vlotid].base_pack_type;
								document.getElementById('idproduct_code_type').innerHTML = tempArray[vlotid].product_code_type;
								// 11 Production Date
								document.getElementById('idorigination_date').innerHTML = tempArray[vlotid].origination_date;
								document.getElementById('idorigination_date2').innerHTML = tempArray[vlotid].origination_date;
								//13 Packaging Date
								document.getElementById('idexpiration_date').innerHTML = tempArray[vlotid].expiration_date;
								//17 Expiration Date
								document.getElementById('idbest_before_date').innerHTML = tempArray[vlotid].best_before_date;
								document.getElementById('idsell_by_date').innerHTML = tempArray[vlotid].sell_by_date;// 15 Sell by Date (Quality Control) YYMMDD
								document.getElementById('idretest_by_date').innerHTML = tempArray[vlotid].retest_by_date;
								// Generate Lot Details Barcode as per the GS-128
								//https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=Example
								document.getElementById('idbarcode').innerHTML =
								'<img  src="https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=' + BASE_URL + '(01)' + tempArray[vlotid].product_code_gtin +'(10)'+ tempArray[vlotid].lot_number +'(11)'+tempArray[vlotid].origination_date+'(17)'+tempArray[vlotid].best_before_date+'&includetext">';
								document.getElementById('idbarcodemsg').innerHTML = '<small style="line-height:10px;">&nbsp;&nbsp;&nbsp;&nbsp;(01) ' + tempArray[vlotid].product_code_gtin +'<br>&nbsp;&nbsp;&nbsp;&nbsp;(10) '+ tempArray[vlotid].lot_number +'<br>&nbsp;&nbsp;&nbsp;&nbsp;(11) '+tempArray[vlotid].origination_date+'<br>&nbsp;&nbsp;&nbsp;&nbsp;(17) '+tempArray[vlotid].best_before_date+'</small>'

								//document.getElementById('idbarcode').innerHTML =  '<img alt="Barcoded value'+tempArray[vlotid].product_code_gtin+'"src="http://bwipjs-api.metafloor.com/?bcid=code128&text= ' + tempArray[vlotid].product_code_gtin + '&includetext">';

							}
							</script>

							<script type="text/javascript">
								function showDiv(vdivid) {
									div = document.getElementById(vdivid);
									if (div.style.display !== "none") {
										div.style.display = "none";
										} else {
										div.style.display = "block";
									}

								}

							</script>


              <script type="text/javascript">
                $("#mylotid").select2({
                  placeholder:"--- Search Case Number ---",
                  minimumInputLength: 1,
                  });

                async function lotvalues(){
                  var searchInput = $("#mylotid").val()
                  let url = "http://3.86.246.56:5000/api/micro/v1.0.0/package/caseDetails/" + searchInput;
                  await $.get(url, function(data, status){
                      data=JSON.stringify(data)
                      obj = JSON.parse(data)
                      res=obj.case_info
                      // res=obj1[0]

                  });
                  let url1 = "http://3.86.246.56:5000/api/micro/v1/product/itemList/" + searchInput;
                  await $.get(url1, function(data1, status){
                      data1=JSON.stringify(data1)
                      obj1 = JSON.parse(data1)
                      snum_list=obj1.item_list
                  });
                  let url2 = "http://3.86.246.56:5000/api/micro/v1/product/itemCount/" + searchInput;
                  await $.get(url2, function(data2, status){
                      data2=JSON.stringify(data2)
                      obj3 = JSON.parse(data2)
                      // console.log(obj1)
                  });
                  var html_to_append3 = '';
                    "<b>Active item Count:"+ obj3.item_count +" </b>";
                   $("#showitemcount").html(html_to_append3);

                  var html_to_append = '';

                  html_to_append +="<ul class='htimeline' ><li class='step col-sm-7'><div class='tasks container-fluid'><div class='resource' data-name=''><div class='task col-sm-4' style='font-size:90%'>Case Number</div><div class='task col-sm-8' style='font-size:90%'>&nbsp;"+res.case_sn+ "<span id='idbase_pack_type'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Package Type</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.package_level +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Inner Count</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.inner_count +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Package Color</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.package_colour +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Package Depth</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.package_depth +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Package Height</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.package_height +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Package Shape</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.package_shape +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Package Weight</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.package_weight +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Package Width</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.package_width +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Total Dimensions</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.total_dimensions +"<span id='idorigination_date'></span></div></div></div><br/></li>"+


                    "<br><br><h5 align = 'centre'; ><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lot/Batch Data Code <small>(GS1-128)</small></b></h5>"+
                    "<li class='col-sm-5'><div align = 'left' class='task col-sm-4'><img  src='https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=http://3.86.246.56:5000/api/micro/v1.0.0/package/caseDetails/" + res.case_sn +"'></div><div align = 'left' class='task col-sm-8'>"+
                    "<small style='line-height:10px;'><br>&nbsp;&nbsp;&nbsp;&nbsp;(00)"+searchInput +"<br>&nbsp;&nbsp;&nbsp;&nbsp;(01)"+res.case_sn+"</small></div></li></ul>"
                   $("#idshowlot").html(html_to_append);


                   var html_append1 = '';
                   for(var key in snum_list) {
                          var value = snum_list[key];
                            html_append1+="<option value="+value+">"+value+"</option>"
                            }
                   $("#mypalletid").empty()
                   $("#mypalletid").append("<option value='0'>--- Search Item Number ---</option>");
                   $("#mypalletid").append(html_append1);
                   delete snum_list
                }


                async function serialvalues(){
                  // var searchInput = $("#mylotid").val()
                  var serialInput = $("#mypalletid").val()
                  let url = "http://3.86.246.56:5000/api/micro/v1/product/itemInfo/" + serialInput ;
                  await $.get(url, function(data, status){
                      data=JSON.stringify(data)
                      obj1 = JSON.parse(data)
                      res=obj1.item_info
                      // console.log(res)
                  });


                  var html_to_appendserial = '';

                  html_to_appendserial +="<ul class='htimeline' ><li class='step col-sm-7'><div class='tasks container-fluid'><div class='resource' data-name=''><div class='task col-sm-4' style='font-size:90%'>Item Number</div><div class='task col-sm-8' style='font-size:90%'>&nbsp;"+res.item_sn+ "<span id='idbase_pack_type'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Batch Number</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.batch_no +"<span id='idproduct_code_type'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Brand Name</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+res.brand_name+"<span id='idproduct_code_type'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Gtin</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.gtin +"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Expiry Date</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.expiry_date+"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Item Inner Count</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.item_inner_count+"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Item Package Type</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.item_pack_type+"<span id='idorigination_date'></span></div>"+
                    "<div class='task col-sm-4' style='font-size:90%'>Manufacturer Address</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.mfg_address+"<span id='idorigination_date'></span></div>"+

                    "<div class='task col-sm-4' style='font-size:90%'>Manufacturer date</div><div class='task col-sm-8' style='font-size:90%'> &nbsp;"+ res.mfg_date+"<span id='idorigination_date'></span></div></div></div><br/></li>"+

                    "<br><br><h5 align = 'centre'; ><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial Data Code <small>(GS1-128)</small></b></h5>"+
                  "<li class='col-sm-5'><div align = 'left'; class='task col-sm-4'><img  src='https://api.qrserver.com/v1/create-qr-code/?size=90x90&data=http://3.86.246.56:5000/api/micro/v1/product/itemInfo/" +serialInput+ "'></div><div align = 'left'; class='task col-sm-8'>"+"<small style='line-height:10px;'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(01)"+res.gtin
                 +"<br>&nbsp;&nbsp;&nbsp;&nbsp;(01)"+res.item_sn+"</small></div></li>"
                   $("#idshowpallet").html(html_to_appendserial);
                }
              

                  $('#mycaseid').select2({
                  placeholder:"--- Search Case Number ---",

                  });
                  // $('#myssccid').select2({
                  //   placeholder:"--- Search SSCC Number ---",
                  //                   minimumInputLength: 1,
                  // });

                  $('#mypalletid').select2({
                    placeholder:"--- Search Serial Number ---",
                    minimumInputLength: 1,
                  });
              </script>


      {%endif%}


      {%endif%}


									{%endfor%}

{%endblock%}
